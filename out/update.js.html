<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: update.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: update.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var mongo = require('mongodb');
require('dotenv').config();
const MongoClient = mongo.MongoClient;

/**
 * class that lets you update the information stored on the database
 */
class Update{
  /**
   * lets you update the price of the swimhalls ticket.
   * @param id
   * @param updateInfo
   * @returns Integer
   */
  async update(id, updateInfo) {
    const uri = 'mongodb+srv://' + process.env.DB_USER + ':' +
        process.env.DB_PASSWORD +
        '@siseujula-vfiyp.mongodb.net/test?retryWrites=true&amp;w=majority';
    const client = new MongoClient(uri,
        {useNewUrlParser: true, useUnifiedTopology: true});
    try {
      await client.connect();
      let result = await updateField(client, id, updateInfo);
      return (result);
    } catch (e) {
      console.error(e);
    } finally {
      await client.close();
    }

    async function updateField(client, idOfListing, updateInfo) {
      console.log(updateInfo);
      let result = await client.db('swim_halls').
          collection('halls_capital_area').
          updateOne({_id: idOfListing}, {$set: {hinta: updateInfo}});
      console.log(`${result.matchedCount} document(s) matched the query criteria.`);
      console.log(`${result.modifiedCount} document(s) was/were updated.`);
    }
  }

  /**
   * lets you update the whole swimhalls info
   * @param id
   * @param updateInfo
   * @returns Integer
   */
  async updateAll(id, updateInfo) {
    const uri = 'mongodb+srv://' + process.env.DB_USER + ':' +
        process.env.DB_PASSWORD +
        '@siseujula-vfiyp.mongodb.net/test?retryWrites=true&amp;w=majority';
    const client = new MongoClient(uri,
        {useNewUrlParser: true, useUnifiedTopology: true});
    try {
      await client.connect();
      let result = await updateField(client, id, updateInfo);
      return (result);
    } catch (e) {
      console.error(e);
    } finally {
      await client.close();
    }

    async function updateField(client, idOfListing, jsonObject) {
      let result = await client.db('swim_halls').
          collection('halls_capital_area').
          updateOne({_id: idOfListing}, {$set: {nimi:jsonObject["nimi"],
                                                ratapituus: jsonObject["ratapituus"],
                                                ratamäärä: jsonObject["ratamäärä"],
                                                puhelin: jsonObject["puhelin"],
                                                aika: jsonObject["aika"],
                                                hinta: jsonObject["hinta"],
                                                alehinta: jsonObject["alehinta"],
                                                osoite: jsonObject["osoite"],
                                                kaupunki: jsonObject["kaupunki"],
                                                kommentit: jsonObject["kommentit"],
                                                url: jsonObject["url"]
                                              }});
      console.log(`${result.matchedCount} document(s) matched the query criteria.`);
      console.log(`${result.modifiedCount} document(s) was/were updated.`);
    }
  }


}
module.exports = Update;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Update.html">Update</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Dec 12 2019 09:06:02 GMT+0200 (GMT+02:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
